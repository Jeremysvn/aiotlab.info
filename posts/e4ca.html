<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="utf-8"><meta name="keywords" content="Centos7 搭建开源个人网盘Nextcloud与常用插件, 暮云MuYun,AioT,Lab,AiotLab,MuYun Blog,Linux,CentOS,REHL,Ubuntu,Windows Server,Server 2012,Server 2016,Server 2019,SQL Server,Office,运维笔记,运维技术,运维方案,环境配置"><meta name="description" content="暮云MuYun-分享运维技术点滴，提供系统安全运维相关经验及技术；打造一个最全、最实用的专业运维分享博客。留下运维点滴记忆，悠悠岁月慢慢回味。"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><title>Centos7 搭建开源个人网盘Nextcloud与常用插件 | 暮云MuYun</title><link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/favicon.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/awesome/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/materialize/materialize.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/aos/aos.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/animate/animate.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/css/matery.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/css/my.css"><script src="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/jquery/jquery.min.js"></script><meta name="generator" content="Hexo 5.3.0"><link rel="stylesheet" href="/css/prism-tomorrow.css"></head><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><div><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/medias/logo.png" class="logo-img" alt="LOGO"> <span class="logo-span">暮云MuYun</span></div></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-home" style="zoom:.6"></i> <span>首页</span></a></li><li class="hide-on-med-and-down nav-item"><a href="" class="waves-effect waves-light"><i class="fas fa-archive" style="zoom:.6"></i> <span>时间轴</span><i class="fas fa-chevron-down" aria-hidden="true" style="zoom:.6"></i></a><ul class="sub-nav menus_item_child"><li><a href="/archives"><i class="fas fa-archive" style="margin-top:-20px;zoom:.6"></i> <span>归档</span></a></li><li><a href="/categories"><i class="fas fa-bookmark" style="margin-top:-20px;zoom:.6"></i> <span>分类</span></a></li><li><a href="/tags"><i class="fas fa-tags" style="margin-top:-20px;zoom:.6"></i> <span>标签</span></a></li></ul></li><li class="hide-on-med-and-down nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fas fa-comments" style="zoom:.6"></i> <span>留言板</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/friends" class="waves-effect waves-light"><i class="fas fa-address-book" style="zoom:.6"></i> <span>友情链接</span></a></li><li class="hide-on-med-and-down nav-item"><a href="" class="waves-effect waves-light"><i class="fas fa-user-circle" style="zoom:.6"></i> <span>关于</span><i class="fas fa-chevron-down" aria-hidden="true" style="zoom:.6"></i></a><ul class="sub-nav menus_item_child"><li><a target="_blank" rel="noopener" href="http://www.itbiji.net"><i class="fa fa-binoculars fa-fw" style="margin-top:-20px;zoom:.6"></i> <span>运维笔记</span></a></li><li><a target="_blank" rel="noopener" href="https://muyun.me"><i class="fa fa-heart" style="margin-top:-20px;zoom:.6"></i> <span>MuYun</span></a></li><li><a href="/about"><i class="fas fa-user-circle" style="margin-top:-20px;zoom:.6"></i> <span>关于我</span></a></li></ul></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fas fa-search" title="搜索" style="zoom:.85"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/medias/logo.png" class="logo-img circle responsive-img"><div class="logo-name">暮云MuYun</div><div class="logo-desc">暮云MuYun-分享运维技术点滴，提供系统安全运维相关经验及技术；打造一个最全、最实用的专业运维分享博客。留下运维点滴记忆，悠悠岁月慢慢回味。</div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a href="javascript:;"><i class="fa-fw fas fa-archive"></i> 时间轴<span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a href="/archives" style="margin-left:75px"><i class="fa fas fa-archive" style="position:absolute;left:50px"></i> <span>归档</span></a></li><li><a href="/categories" style="margin-left:75px"><i class="fa fas fa-bookmark" style="position:absolute;left:50px"></i> <span>分类</span></a></li><li><a href="/tags" style="margin-left:75px"><i class="fa fas fa-tags" style="position:absolute;left:50px"></i> <span>标签</span></a></li></ul></li><li class="m-nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fa-fw fas fa-comments"></i> 留言板</a></li><li class="m-nav-item"><a href="/friends" class="waves-effect waves-light"><i class="fa-fw fas fa-address-book"></i> 友情链接</a></li><li class="m-nav-item"><a href="javascript:;"><i class="fa-fw fas fa-user-circle"></i> 关于<span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a target="_blank" rel="noopener" href="http://www.itbiji.net" style="margin-left:75px"><i class="fa fa fa-binoculars fa-fw" style="position:absolute;left:50px"></i> <span>运维笔记</span></a></li><li><a target="_blank" rel="noopener" href="https://muyun.me" style="margin-left:75px"><i class="fa fa fa-heart" style="position:absolute;left:50px"></i> <span>MuYun</span></a></li><li><a href="/about" style="margin-left:75px"><i class="fa fas fa-user-circle" style="position:absolute;left:50px"></i> <span>关于我</span></a></li></ul></li></ul></div></div></nav></header><div class="bg-cover pd-header post-cover" style="background-image:url(https://cdn.jsdelivr.net/gh/jeremysvn/muyun/medias/featureimages/7.jpg)"><div class="container" style="right:0;left:0"><div class="row"><div class="col s12 m12 l12"><div class="brand"><h1 class="description center-align post-title">Centos7 搭建开源个人网盘Nextcloud与常用插件</h1></div></div></div></div></div><main class="post-container content"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/tocbot/tocbot.css"><style>#articleContent h1::before,#articleContent h2::before,#articleContent h3::before,#articleContent h4::before,#articleContent h5::before,#articleContent h6::before{display:block;content:" ";height:100px;margin-top:-100px;visibility:hidden}#articleContent :focus{outline:0}.toc-fixed{position:fixed;top:64px}.toc-widget{width:345px;padding-left:20px}.toc-widget .toc-title{padding:35px 0 15px 17px;font-size:1.5rem;font-weight:700;line-height:1.5rem}.toc-widget ol{padding:0;list-style:none}#toc-content{padding-bottom:30px;overflow:auto}#toc-content ol{padding-left:10px}#toc-content ol li{padding-left:10px}#toc-content .toc-link:hover{color:#42b983;font-weight:700;text-decoration:underline}#toc-content .toc-link::before{background-color:transparent;max-height:25px;position:absolute;right:23.5vw;display:block}#toc-content .is-active-link{color:#42b983}#floating-toc-btn{position:fixed;right:15px;bottom:76px;padding-top:15px;margin-bottom:0;z-index:998}#floating-toc-btn .btn-floating{width:48px;height:48px}#floating-toc-btn .btn-floating i{line-height:48px;font-size:1.4rem}</style><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><a href="/tags/CentOS/"><span class="chip bg-color">CentOS</span></a> <a href="/tags/Linux/"><span class="chip bg-color">Linux</span></a> <a href="/tags/NextCloud/"><span class="chip bg-color">NextCloud</span></a></div></div><div class="col s5 right-align"><div class="post-cate"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/NextCloud/" class="post-category">NextCloud</a></div></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="far fa-calendar-minus fa-fw"></i> 发布日期:&nbsp;&nbsp; 2020-06-20</div><div class="post-date info-break-policy"><i class="far fa-calendar-check fa-fw"></i> 更新日期:&nbsp;&nbsp; 2021-02-11</div><div class="info-break-policy"><i class="far fa-file-word fa-fw"></i> 文章字数:&nbsp;&nbsp; 2.9k</div><div id="busuanzi_container_page_pv" class="info-break-policy"><i class="far fa-eye fa-fw"></i> 阅读次数:&nbsp;&nbsp;<span id="busuanzi_value_page_pv"></span></div></div></div><hr class="clearfix"><div class="card-content article-card-content"><div id="articleContent"><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>文件服务器，是一个公司最常用的服务应用，每个公司企业基本都有自己的文件服务器实，现储存分享，上传下载文件文档等功能，常见的文件服务器就是ftp服务器，但是ftp服务器的功能实在有限，且对于普通用户使用入手难度较大，又缺乏界面，对于公司的普通用户来说，确实不是一个好的文件服务器。一般ftp也只是用户服务器，网站应用等方面。</p><p>在目前的公司企业环境中，企业网盘则是一个更好的文件服务器替代方案。百度云盘，相信大家基本都有用过吧，友好的界面交互，网页端，客户端都有，不需要任何命令，实现上传下载，分享等诸多功能。但是这种云盘毕竟不是自己的，很多公司对于将机密文件放在上面心存疑惑，且时不时的网盘关闭热潮也让人担心。既然如此，为何不搭建自己的网盘呢，于是就有了nextcloud。</p><p>对于私人网盘，市面上已经有很多的产品，很多开源半开源的云盘系统。其中最出名的就是 seafile和owncloud/nextcloud。seafile是国人开发的，分块处理，断点上传，速度比后者要快。有社区版和企业版。社区版免费，但是功能有限，企业版要收费，功能更强大。但是社区版的功能，老实说只能满足个人使用，无法满足企业使用。而企业版要收费，费用根据公司人数不同，还需要发邮件询问。</p><p>像我着这种穷人，穷公司，人数不多，又不像花钱的，那么nextcloud就是最好的选择，nextcloud是owncloud的一个分支，由原创始人团队维护，是在owncloud被别的公司收购后，由创始人团队创立的新分支。就像 mysql和mariadb。nextcloud完全开源，功能强大，是外国人开发维护的。具体的与seafile等的对比，这里不详细说明了，有兴趣的百度就好。下面记录一下在centos7 服务器上搭建nextcloud的具体过程。</p><p> </p><h2 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h2><p>环境: centos8<br>nextcloud: 19.0.0 <br>selinux 关闭</p><ol><li>nextcloud是php项目，这里我使用nginx，官方文档是用apache的，有一点点具别。但不大。在下载nextcloud之前，先安装nginx和php</li></ol><pre class="language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 先删除系统可能自带的PHP和nginx，用来面命令查找是否有安装</span>
$ rpm -qa <span class="token operator">|</span><span class="token function">grep</span> php
$ rpm -qa <span class="token operator">|</span><span class="token function">grep</span> nginx
<span class="token comment" spellcheck="true"># 强制删除软件包，软件包全称就是上面通过rpm -qa 查询到的软件包全名</span>
$ rpm -e --nodeps <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;软件包全称&amp;#125; </span>
 
<span class="token comment" spellcheck="true"># 安装yum的epel源，这里推荐用阿里云的镜像安装，包更全。</span>
$ rpm -ivh https://mirrors.aliyun.com/epel/epel-release-latest-7.noarch.rpm
 
<span class="token comment" spellcheck="true"># 安装nginx</span>
$ yum <span class="token function">install</span> -y nginx
 
<span class="token comment" spellcheck="true"># 安装php的源</span>
$ rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm
 
<span class="token comment" spellcheck="true"># 安装php已经会用到扩展</span>
$ yum <span class="token function">install</span> -y php70w-devel php70w-pear php70w-pecl php70w-gd php70w-opcache php70w-cli php70w-pdo php70w-process php70w-pecl-apcu php70w-mcrypt php70w-mysql php70w-fpm php70w-pecl-memcached php70w-common php70w-xml php70w-mbstring php70w-pecl-igbinary
 
<span class="token comment" spellcheck="true"># 检查是否安装成功</span>
$ nginx -v
nginx version: nginx/1.12.2
$ php -v
PHP 7.0.30 <span class="token punctuation">(</span>cli<span class="token punctuation">)</span> <span class="token punctuation">(</span>built: Apr 28 2018 08:14:08<span class="token punctuation">)</span> <span class="token punctuation">(</span> NTS <span class="token punctuation">)</span>
Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> 1997-2017 The PHP Group
Zend Engine v3.0.0, Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> 1998-2017 Zend Technologies
    with Zend OPcache v7.0.30, Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> 1999-2017, by Zend Technologies
</code></pre><ol start="2"><li>nextcloud 还需要数据库，这里我使用的mysql，mysql提前安装好或使用已有的数据库服务器，具体安装安装方式可参考我另一篇博文: 《CentOS7.2 安装mysql，并配置自动启动和远程访问》。在mysql种创建一个新的databse用于nextcloud使用.</li></ol><pre class="language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 在装有mysql的服务器上执行</span>
$ mysql -u root -p
<span class="token operator">></span> create database nextcloud_db<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true"># 授权给自定义用户，这里以用户名：nextclouduser，密码：nextcloudpasswd，代替。</span>
<span class="token operator">></span> grant all privileges on nextcloud_db.* to nextclouduser@localhost identified by <span class="token string">'nextcloudpasswd'</span><span class="token punctuation">;</span>
<span class="token operator">></span> flush privileges<span class="token punctuation">;</span>
</code></pre><p>3.  为nextcloud 生成自签名ssl证书</p><pre class="language-bash"><code class="language-bash">$ <span class="token function">cd</span> /etc/nginx/cert/    <span class="token comment" spellcheck="true"># 没有则创建此文件夹</span>
$ openssl req -new -x509 -days 365 -nodes -out /etc/nginx/cert/nextcloud.crt -keyout /etc/nginx/cert/nextcloud.key
<span class="token comment" spellcheck="true"># 会出现下面的选项需要填写，可以随便填。</span>
Country Name <span class="token punctuation">(</span>2 letter code<span class="token punctuation">)</span> <span class="token punctuation">[</span>XX<span class="token punctuation">]</span>:cn                                 <span class="token comment" spellcheck="true"># 国家</span>
State or Province Name <span class="token punctuation">(</span>full name<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>:guangdong                      <span class="token comment" spellcheck="true"># 省份</span>
Locality Name <span class="token punctuation">(</span>eg, city<span class="token punctuation">)</span> <span class="token punctuation">[</span>Default City<span class="token punctuation">]</span>:guangzhou                    <span class="token comment" spellcheck="true"># 地区名字</span>
Organization Name <span class="token punctuation">(</span>eg, company<span class="token punctuation">)</span> <span class="token punctuation">[</span>Default Company Ltd<span class="token punctuation">]</span>:Amos           <span class="token comment" spellcheck="true"># 公司名</span>
Organizational Unit Name <span class="token punctuation">(</span>eg, section<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>:Technology                 <span class="token comment" spellcheck="true"># 部门</span>
Common Name <span class="token punctuation">(</span>eg, your name or your server's hostname<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>:Amos        <span class="token comment" spellcheck="true"># CA主机名</span>
Email Address <span class="token punctuation">[</span><span class="token punctuation">]</span>:Amos@Amos.com                                       <span class="token comment" spellcheck="true"># Email地址</span>
<span class="token comment" spellcheck="true"># 修改证书和文件夹权限</span>
$ <span class="token function">chmod</span> 600 /etc/nginx/cert/*
$ <span class="token function">chmod</span> 700 /etc/nginx/cert
</code></pre><ol start="4"><li>下载nextcloud，并配置php和nginx</li></ol><pre class="language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 下载nextcloud，官网地址为: https://nextcloud.com/install/#instructions-server</span>
$ <span class="token function">cd</span> /usr/local/src
$ yum <span class="token function">install</span> -y <span class="token function">wget</span> unzip
$ <span class="token function">wget</span> https://download.nextcloud.com/server/releases/nextcloud-13.0.2.zip    <span class="token comment" spellcheck="true"># 下载</span>
$ unzip nextcloud-13.0.2.zip    <span class="token comment" spellcheck="true"># 解压</span>
$ <span class="token function">mv</span> nextcloud /usr/share/nginx/html/    <span class="token comment" spellcheck="true"># 移动到指定文件夹内</span>
$ <span class="token function">cd</span> /usr/share/nginx/html/nextcloud     <span class="token comment" spellcheck="true"># 进行nextcloud 目录中</span>
$ <span class="token function">mkdir</span> data    <span class="token comment" spellcheck="true"># 创建数据文件夹</span>
$ <span class="token function">chown</span> nginx:nginx -R nextcloud/    <span class="token comment" spellcheck="true"># 将nextcloud文件授权给nginx</span>
 
<span class="token comment" spellcheck="true"># 配置php-fpm</span>
$ vim /etc/php-fpm.d/www.conf
--------------------------------------------------------------------------------
user <span class="token operator">=</span> nginx                                   //将用户和组都改为nginx
group <span class="token operator">=</span> nginx
listen <span class="token operator">=</span> 127.0.0.1:9000
env<span class="token punctuation">[</span>HOSTNAME<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$HOSTNAME</span>                     //将以下几行，去掉注释
env<span class="token punctuation">[</span>PATH<span class="token punctuation">]</span> <span class="token operator">=</span> /usr/local/bin:/usr/bin:/bin
env<span class="token punctuation">[</span>TMP<span class="token punctuation">]</span> <span class="token operator">=</span> /tmp
env<span class="token punctuation">[</span>TMPDIR<span class="token punctuation">]</span> <span class="token operator">=</span> /tmp
env<span class="token punctuation">[</span>TEMP<span class="token punctuation">]</span> <span class="token operator">=</span> /tmp
--------------------------------------------------------------------------------
 
 
<span class="token comment" spellcheck="true"># 为php创建session文件夹</span>
$ <span class="token function">mkdir</span> -p /var/lib/php/session
$ <span class="token function">chown</span> nginx:nginx -R /var/lib/php/session/
 
 
<span class="token comment" spellcheck="true"># 配置nginx</span>
$ <span class="token function">cd</span> /etc/nginx/conf.d/
$ vim nextcloud.conf
--------------------------------------------------------------------------------
upstream php-handler <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
    server 127.0.0.1:9000<span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">#server unix:/var/run/php5-fpm.sock;</span>
<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
 
 
server <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
    listen 80<span class="token punctuation">;</span>
    server_name localhost<span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true"># enforce https</span>
    rewrite ^<span class="token punctuation">(</span>.*<span class="token punctuation">)</span>$ https://<span class="token variable">$host</span><span class="token variable">$1</span> permanent<span class="token punctuation">;</span>
<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
 
 
server <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
    listen 443 ssl<span class="token punctuation">;</span>
    server_name localhost<span class="token punctuation">;</span>
 
    ssl_certificate /etc/nginx/cert/nextcloud.crt<span class="token punctuation">;</span>
    ssl_certificate_key /etc/nginx/cert/nextcloud.key<span class="token punctuation">;</span>
 
    <span class="token comment" spellcheck="true"># Add headers to serve security related headers</span>
    <span class="token comment" spellcheck="true"># Before enabling Strict-Transport-Security headers please read into this</span>
    <span class="token comment" spellcheck="true"># topic first.</span>
    add_header Strict-Transport-Security <span class="token string">"max-age=15768000;
    includeSubDomains; preload;"</span><span class="token punctuation">;</span>
    add_header X-Content-Type-Options nosniff<span class="token punctuation">;</span>
    add_header X-Frame-Options <span class="token string">"SAMEORIGIN"</span><span class="token punctuation">;</span>
    add_header X-XSS-Protection <span class="token string">"1; mode=block"</span><span class="token punctuation">;</span>
    add_header X-Robots-Tag none<span class="token punctuation">;</span>
    add_header X-Download-Options noopen<span class="token punctuation">;</span>
    add_header X-Permitted-Cross-Domain-Policies none<span class="token punctuation">;</span>
 
    <span class="token comment" spellcheck="true"># Path to the root of your installation</span>
    root /usr/share/nginx/html/nextcloud/<span class="token punctuation">;</span>
 
 
    location <span class="token operator">=</span> /robots.txt <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
        allow all<span class="token punctuation">;</span>
        log_not_found off<span class="token punctuation">;</span>
        access_log off<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
 
 
    <span class="token comment" spellcheck="true"># The following 2 rules are only needed for the user_webfinger app.</span>
    <span class="token comment" spellcheck="true"># Uncomment it if you're planning to use this app.</span>
    <span class="token comment" spellcheck="true">#rewrite ^/.well-known/host-meta /public.php?service=host-meta last;</span>
    <span class="token comment" spellcheck="true">#rewrite ^/.well-known/host-meta.json /public.php?service=host-meta-json</span>
    <span class="token comment" spellcheck="true"># last;</span>
 
 
    location <span class="token operator">=</span> /.well-known/carddav <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
      <span class="token keyword">return</span> 301 <span class="token variable">$scheme</span>://<span class="token variable">$host</span>/remote.php/dav<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
    location <span class="token operator">=</span> /.well-known/caldav <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
      <span class="token keyword">return</span> 301 <span class="token variable">$scheme</span>://<span class="token variable">$host</span>/remote.php/dav<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
 
 
    <span class="token comment" spellcheck="true"># set max upload size</span>
    client_max_body_size 10240M<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true"># 上传文件最大限制，php.ini中也要修改，最后优化时会提及。</span>
    fastcgi_buffers 64 4K<span class="token punctuation">;</span>
 
    <span class="token comment" spellcheck="true"># Disable gzip to avoid the removal of the ETag header</span>
    <span class="token function">gzip</span> on<span class="token punctuation">;</span>
    gzip_vary on<span class="token punctuation">;</span>
    gzip_comp_level 4<span class="token punctuation">;</span>
    gzip_min_length 256<span class="token punctuation">;</span>
    gzip_proxied expired no-cache no-store private no_last_modified no_etag auth<span class="token punctuation">;</span>
    gzip_types application/atom+xml application/javascript application/json application/ld+json application/manifest+json application/rss+xml application/vnd.geo+json application/vnd.ms-fontobject application/x-font-ttf application/x-web-app-manifest+json application/xhtml+xml application/xml font/opentype image/bmp image/svg+xml image/x-icon text/cache-manifest text/css text/plain text/vcard text/vnd.rim.location.xloc text/vtt text/x-component text/x-cross-domain-policy<span class="token punctuation">;</span>
 
 
    <span class="token comment" spellcheck="true"># Uncomment if your server is build with the ngx_pagespeed module</span>
    <span class="token comment" spellcheck="true"># This module is currently not supported.</span>
    <span class="token comment" spellcheck="true">#pagespeed off;</span>
 
 
    error_page 403 /core/templates/403.php<span class="token punctuation">;</span>
    error_page 404 /core/templates/404.php<span class="token punctuation">;</span>
 
 
    location / <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
        rewrite ^ /index.php<span class="token variable">$uri</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
 
 
    location ~ ^/<span class="token punctuation">(</span>?:build<span class="token operator">|</span>tests<span class="token operator">|</span>config<span class="token operator">|</span>lib<span class="token operator">|</span>3rdparty<span class="token operator">|</span>templates<span class="token operator">|</span>data<span class="token punctuation">)</span>/ <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
        deny all<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
    location ~ ^/<span class="token punctuation">(</span>?:\.<span class="token operator">|</span>autotest<span class="token operator">|</span>occ<span class="token operator">|</span>issue<span class="token operator">|</span>indie<span class="token operator">|</span>db_<span class="token operator">|</span>console<span class="token punctuation">)</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
        deny all<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
 
    location ~ ^/<span class="token punctuation">(</span>?:index<span class="token operator">|</span>remote<span class="token operator">|</span>public<span class="token operator">|</span><span class="token function">cron</span><span class="token operator">|</span>core/ajax/update<span class="token operator">|</span>status<span class="token operator">|</span>ocs/v<span class="token punctuation">[</span>12<span class="token punctuation">]</span><span class="token operator">|</span>updater/.+<span class="token operator">|</span>ocs-provider/.+<span class="token operator">|</span>core/templates/40<span class="token punctuation">[</span>34<span class="token punctuation">]</span><span class="token punctuation">)</span>\.php<span class="token punctuation">(</span>?:$<span class="token operator">|</span>/<span class="token punctuation">)</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
        include fastcgi_params<span class="token punctuation">;</span>
        fastcgi_split_path_info ^<span class="token punctuation">(</span>.+\.php<span class="token punctuation">)</span><span class="token punctuation">(</span>/.*<span class="token punctuation">)</span>$<span class="token punctuation">;</span>
        fastcgi_param SCRIPT_FILENAME <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span><span class="token punctuation">;</span>
        fastcgi_param PATH_INFO <span class="token variable">$fastcgi_path_info</span><span class="token punctuation">;</span>
        fastcgi_param HTTPS on<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">#Avoid sending the security headers twice</span>
        fastcgi_param modHeadersAvailable <span class="token boolean">true</span><span class="token punctuation">;</span>
        fastcgi_param front_controller_active <span class="token boolean">true</span><span class="token punctuation">;</span>
        fastcgi_pass php-handler<span class="token punctuation">;</span>
        fastcgi_intercept_errors on<span class="token punctuation">;</span>
        fastcgi_request_buffering off<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
 
 
    location ~ ^/<span class="token punctuation">(</span>?:updater<span class="token operator">|</span>ocs-provider<span class="token punctuation">)</span><span class="token punctuation">(</span>?:$<span class="token operator">|</span>/<span class="token punctuation">)</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
        try_files <span class="token variable">$uri</span>/ <span class="token operator">=</span>404<span class="token punctuation">;</span>
        index index.php<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
 
 
    <span class="token comment" spellcheck="true"># Adding the cache control header for js and css files</span>
    <span class="token comment" spellcheck="true"># Make sure it is BELOW the PHP block</span>
    location ~* \.<span class="token punctuation">(</span>?:css<span class="token operator">|</span>js<span class="token punctuation">)</span>$ <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
        try_files <span class="token variable">$uri</span> /index.php<span class="token variable">$uri</span><span class="token variable">$is_args</span><span class="token variable">$args</span><span class="token punctuation">;</span>
        add_header Cache-Control <span class="token string">"public, max-age=7200"</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true"># Add headers to serve security related headers (It is intended to</span>
        <span class="token comment" spellcheck="true"># have those duplicated to the ones above)</span>
        <span class="token comment" spellcheck="true"># Before enabling Strict-Transport-Security headers please read into</span>
        <span class="token comment" spellcheck="true"># this topic first.</span>
        add_header Strict-Transport-Security <span class="token string">"max-age=15768000;includeSubDomains; preload;"</span><span class="token punctuation">;</span>
        add_header X-Content-Type-Options nosniff<span class="token punctuation">;</span>
        add_header X-Frame-Options <span class="token string">"SAMEORIGIN"</span><span class="token punctuation">;</span>
        add_header X-XSS-Protection <span class="token string">"1; mode=block"</span><span class="token punctuation">;</span>
        add_header X-Robots-Tag none<span class="token punctuation">;</span>
        add_header X-Download-Options noopen<span class="token punctuation">;</span>
        add_header X-Permitted-Cross-Domain-Policies none<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true"># Optional: Don't log access to assets</span>
        access_log off<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
 
    location ~* \.<span class="token punctuation">(</span>?:svg<span class="token operator">|</span>gif<span class="token operator">|</span>png<span class="token operator">|</span>html<span class="token operator">|</span>ttf<span class="token operator">|</span>woff<span class="token operator">|</span>ico<span class="token operator">|</span>jpg<span class="token operator">|</span>jpeg<span class="token punctuation">)</span>$ <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
        try_files <span class="token variable">$uri</span> /index.php<span class="token variable">$uri</span><span class="token variable">$is_args</span><span class="token variable">$args</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true"># Optional: Don't log access to other assets</span>
        access_log off<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
----------------------------------------------------------------------------------
 
 
<span class="token comment" spellcheck="true"># 将nginx原配置中80端口的配置删除</span>
$ vim /etc/nginx/nginx.conf
--------------------------------------------------------
server <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;          # 将80端口的server整个删除，应该我们在上面nextcloud.conf中已经配置了，这里不删除的话会导致冲突不生效。</span>
    listen 80<span class="token punctuation">;</span>
<span class="token punctuation">..</span>.
  <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
--------------------------------------------------------
</code></pre><ol start="5"><li>启动nginx和php-fpm</li></ol><pre class="language-bash"><code class="language-bash">$ nginx -t    <span class="token comment" spellcheck="true"># 检查nginx配置是否正确，出现下面输入则正确。</span>
nginx: the configuration <span class="token function">file</span> /etc/nginx/nginx.conf syntax is ok
nginx: configuration <span class="token function">file</span> /etc/nginx/nginx.conf <span class="token function">test</span> is successful
 
<span class="token comment" spellcheck="true"># 启动并设为开机启动 nginx，php-fpm</span>
$ systemctl start nginx
$ systemctl <span class="token function">enable</span> nginx
$ systemctl start php-fpm
$ systemctl <span class="token function">enable</span> php-fpm

<span class="token comment" spellcheck="true"># 配置防火墙，开放http和https的端口。</span>
$ firewall-cmd --add-port<span class="token operator">=</span>80/tcp --permanent
$ firewall-cmd --add-port<span class="token operator">=</span>443/tcp --permanent
$ firewall-cmd --reload
</code></pre><p>PS： 这里我的selinux是关闭的，如果selinux没有关闭，则执行下面命令关闭selinux</p><pre class="language-bash"><code class="language-bash">$ setenforce 0    <span class="token comment" spellcheck="true"># 关闭selinux</span>
$ vim /etc/selinux/config    <span class="token comment" spellcheck="true"># 修改配置，永久关闭。</span>
------------------------------------------------------
SELINUX<span class="token operator">=</span>disabled
------------------------------------------------------
</code></pre><ol start="6"><li>访问网页界面，完成安装。访问搭建nextcloud服务器的ip地址。（如果有域名就访问域名）<br>按照实际情况进行配置，配置完成后，点击安装完成。上图中mysql的主机名，使用上面我们自己的数据库服务器地址和端口</li></ol><p>7. 性能优化，进入主界面后，右上角自己头像，点击设置，基本设置：<br>第一项就有 安全及设置警告，这里会有配置错误提示，优化提示等。根据提示进行优化：<br>① 修改php.ini 文件，添加如下配置：</p><pre class="language-bash"><code class="language-bash">$ vim /etc/php.ini
------------------------------------------------------------------------
<span class="token punctuation">[</span>PHP<span class="token punctuation">]</span>    <span class="token comment" spellcheck="true"># 在[PHP] 以下添加如下配置</span>
opcache.enable<span class="token operator">=</span>1
opcache.enable_cli<span class="token operator">=</span>1
opcache.interned_strings_buffer<span class="token operator">=</span>8
opcache.max_accelerated_files<span class="token operator">=</span>10000
opcache.memory_consumption<span class="token operator">=</span>128
opcache.save_comments<span class="token operator">=</span>1
opcache.revalidate_freq<span class="token operator">=</span>1
<span class="token punctuation">..</span>.
upload_max_filesize <span class="token operator">=</span> 10240M    <span class="token comment" spellcheck="true"># 上传文件最大大小，可以自定义修改，默认为512M</span>
------------------------------------------------------------------------
 
$ vim /etc/nginx/nginx.d/nextcloud.conf
</code></pre><p>② 设置缓存后端，可以使用redis，memcache。单机或集群模式都可以。不同的配置方式可以参考官方文档。</p><p>这里我直接单机安装并配置使用memcache。</p><pre class="language-bash"><code class="language-bash">$ yum <span class="token function">install</span> -y memcache
$ vim /etc/sysconfig/memcached
------------------------------------------------------------------------
PORT<span class="token operator">=</span><span class="token string">"11211"</span>    <span class="token comment" spellcheck="true"># 端口</span>
USER<span class="token operator">=</span><span class="token string">"memcached"</span>    <span class="token comment" spellcheck="true"># 用户</span>
MAXCONN<span class="token operator">=</span><span class="token string">"1024"</span>    <span class="token comment" spellcheck="true"># 最大链接数</span>
CACHESIZE<span class="token operator">=</span><span class="token string">"2048"</span>    <span class="token comment" spellcheck="true"># 最大内存，单位M</span>
OPTIONS<span class="token operator">=</span><span class="token string">""</span>
-----------------------------------------------------------------------
 
<span class="token comment" spellcheck="true"># 修改nextcloud的config配置文件，添加memcached缓存配置</span>
$ vim /usr/share/nginx/html/nextcloud/config/config.php
-----------------------------------------------------------------------
<span class="token string">'memcache.local'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'\OC\Memcache\APCu'</span>,
  <span class="token string">'memcache.distributed'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'\OC\Memcache\Memcached'</span>,
  <span class="token string">'memcached_servers'</span> <span class="token operator">=</span><span class="token operator">></span> array<span class="token punctuation">(</span>
   array<span class="token punctuation">(</span><span class="token string">'localhost'</span>, 11211<span class="token punctuation">)</span>,
     <span class="token punctuation">)</span>,
-----------------------------------------------------------------------
</code></pre><p>③ 重启nginx和php-fpm，是配置生效</p><pre class="language-bash"><code class="language-bash">$ systemctl start memcached
$ systemctl <span class="token function">enable</span> memcached
$ systemctl restart nginx
$ systemctl restart php-fpm
</code></pre><p>④ 设置后台任务，cron执行。</p><pre class="language-bash"><code class="language-bash">$ vim /etc/crontab    <span class="token comment" spellcheck="true"># 修改cron配置文件，添加如下配置</span>
---------------------------------------------------------------------------------
*/15 * * * * -u nginx /usr/bin/php -f /usr/share/nginx/html/nextcloud/cron.php
---------------------------------------------------------------------------------
</code></pre><ol start="8"><li>配置邮件服务器</li></ol><p>在设置 –&gt; 其他设置 中，配置smtp服务器。并进行测试，收到邮件则为OK。</p><ol start="9"><li>到此，nextcloud已经安装完成。除此之外，nextcloud还有很多常用插件，用于拓展功能，包括官方的或个人的，点击右上角个人头像–&gt;应用</li></ol><p>在这里可以直接点击安装启动应用。非常方便。本身安装时便会自带有一些应用，这里推荐几个需要手动安装的常用应用：</p><p>①Announcement center  管理员可以发公告</p><p>②Circles 圈子，每个人都可以建立加入圈子，实现圈子的文件共享</p><p>③Group folders 组文件夹</p><p>④File access control 文件访问控制</p><p>⑤Impersonate 管理员可以模拟用户，可以以用户登陆到他们的网盘，可以看到个人用户的文件，这个有点不太隐私。</p><p>。。。</p><p>当然，还有很多有趣的应用，等你自己去发现。</p><p>OK，到此，nextcloud的搭建已经完成。自己去不断使用，不断探索功能吧。</p><p> </p><p>PS：在设置中还会一直有一些报错，虽然按照要求进行配置了，却还是报错，这就在暂且忽略掉吧</p></div><hr><div class="reprint" id="reprint-statement"><div class="reprint__author"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-user">文章作者:</i></span> <span class="reprint-info"><a href="/about" rel="external nofollow noreferrer">Jeremy Peng</a></span></div><div class="reprint__type"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-link">文章链接:</i></span> <span class="reprint-info"><a href="https://muyun.info/posts/e4ca.html">https://muyun.info/posts/e4ca.html</a></span></div><div class="reprint__notice"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-copyright">版权声明:</i></span> <span class="reprint-info">本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a> 许可协议。转载请注明来源 <a href="/about" target="_blank">Jeremy Peng</a> !</span></div></div><script async defer>document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }</script><div class="tag_share" style="display:block"><div class="post-meta__tag-list" style="display:inline-block"><div class="article-tag"><a href="/tags/CentOS/"><span class="chip bg-color">CentOS</span></a> <a href="/tags/Linux/"><span class="chip bg-color">Linux</span></a> <a href="/tags/NextCloud/"><span class="chip bg-color">NextCloud</span></a></div></div><div class="post_share" style="zoom:80%;width:fit-content;display:inline-block;float:right;margin:-.15rem 0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div><script src="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/share/js/social-share.min.js"></script></div></div></div><style>#reward{margin:40px 0;text-align:center}#reward .reward-link{font-size:1.4rem;line-height:38px}#reward .btn-floating:hover{box-shadow:0 6px 12px rgba(0,0,0,.2),0 5px 15px rgba(0,0,0,.2)}#rewardModal{width:320px;height:350px}#rewardModal .reward-title{margin:15px auto;padding-bottom:5px}#rewardModal .modal-content{padding:10px}#rewardModal .close{position:absolute;right:15px;top:15px;color:rgba(0,0,0,.5);font-size:1.3rem;line-height:20px;cursor:pointer}#rewardModal .close:hover{color:#ef5350;transform:scale(1.3);-moz-transform:scale(1.3);-webkit-transform:scale(1.3);-o-transform:scale(1.3)}#rewardModal .reward-tabs{margin:0 auto;width:210px}.reward-tabs .tabs{height:38px;margin:10px auto;padding-left:0}.reward-content ul{padding-left:0!important}.reward-tabs .tabs .tab{height:38px;line-height:38px}.reward-tabs .tab a{color:#fff;background-color:#ccc}.reward-tabs .tab a:hover{background-color:#ccc;color:#fff}.reward-tabs .wechat-tab .active{color:#fff!important;background-color:#22ab38!important}.reward-tabs .alipay-tab .active{color:#fff!important;background-color:#019fe8!important}.reward-tabs .reward-img{width:210px;height:210px}</style><div id="reward"><a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close modal-close"><i class="fas fa-times"></i></a><h4 class="reward-title">你的赏识是我前进的动力</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs row"><li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li><li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li></ul><div id="alipay"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/medias/reward/alipay.png" class="reward-img" alt="支付宝打赏二维码"></div><div id="wechat"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/medias/reward/wechat.jpg" class="reward-img" alt="微信打赏二维码"></div></div></div></div></div></div><script>$(function(){$(".tabs").tabs()})</script></div></div><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fas fa-chevron-left"></i> &nbsp;上一篇</div><div class="card"><a href="/posts/462d.html"><div class="card-image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/medias/featureimages/7.jpg" class="responsive-img" alt="Linux 系统修复"> <span class="card-title">Linux 系统修复</span></div></a><div class="card-content article-content"><div class="summary block-with-text">有时我们会因为各种问题导致操作系统损坏，如何修复呢？现在我们通过光盘来修复。</div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i> 2020-09-07</span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="post-category">操作系统</a></span></div></div><div class="card-action article-tags"><a href="/tags/CentOS/"><span class="chip bg-color">CentOS</span></a> <a href="/tags/Linux/"><span class="chip bg-color">Linux</span></a> <a href="/tags/Ubuntu/"><span class="chip bg-color">Ubuntu</span></a></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color">下一篇&nbsp;<i class="fas fa-chevron-right"></i></div><div class="card"><a href="/posts/fa9f.html"><div class="card-image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/medias/featureimages/19.jpg" class="responsive-img" alt="Linux 存储扩容，分给扩容"> <span class="card-title">Linux 存储扩容，分给扩容</span></div></a><div class="card-content article-content"><div class="summary block-with-text">扩容指定目录下存储空间大小</div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i> 2020-06-10</span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="post-category">操作系统</a></span></div></div><div class="card-action article-tags"><a href="/tags/CentOS/"><span class="chip bg-color">CentOS</span></a> <a href="/tags/Linux/"><span class="chip bg-color">Linux</span></a> <a href="/tags/Ubuntu/"><span class="chip bg-color">Ubuntu</span></a></div></div></div></div></article></div><script src="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/codeBlock/codeBlockFuction.js"></script><script src="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/codeBlock/codeLang.js"></script><script src="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/codeBlock/codeCopy.js"></script><script src="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/codeBlock/codeShrink.js"></script></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div class="toc-widget card" style="background-color:#fff"><div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div><div id="floating-toc-btn" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color"><i class="fas fa-list-ul"></i></a></div><script src="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/tocbot/tocbot.min.js"></script><script>$(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });</script></main><footer class="page-footer bg-color"><div class="container row center-align" style="margin-bottom:0!important"><div class="col s12 m8 l8 copy-right">Copyright&nbsp;&copy; <span id="year">2020-2021</span> <a href="/about" target="_blank">Jeremy Peng</a> |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank" rel="external nofollow noreferrer">Hexo</a> |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank" rel="external nofollow noreferrer">Matery</a><br>&nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span class="white-color">35.7k</span>&nbsp;字 <span id="busuanzi_container_site_pv">|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv" class="white-color"></span>&nbsp;次</span> <span id="busuanzi_container_site_uv">|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv" class="white-color"></span>&nbsp;人</span><br><br></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/jeremysvn" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fab fa-github"></i></a><a href="mailto:aiotlab@126.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope-open"></i></a><a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=13387200" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 13387200" data-position="top" data-delay="50"><i class="fab fa-qq"></i></a><a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fas fa-rss"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i> &nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script>$(function(){!function(t,a,s){"use strict";$.ajax({url:t,dataType:"xml",success:function(t){var e=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),r=document.getElementById(a),n=document.getElementById(s);r.addEventListener("input",function(){var f='<ul class="search-result-list">',m=this.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="",this.value.trim().length<=0||(e.forEach(function(t){var r=!0,n=t.title.trim().toLowerCase(),a=t.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),e=t.url;e=0===e.indexOf("/")?t.url:"/"+e;var s=-1,i=-1,l=-1;if(""!==n&&""!==a&&m.forEach(function(t,e){s=n.indexOf(t),i=a.indexOf(t),s<0&&i<0?r=!1:(i<0&&(i=0),0===e&&(l=i))}),r){f+="<li><a href='"+e+"' class='search-result-title'>"+n+"</a>";var c=t.content.trim().replace(/<[^>]+>/g,"");if(0<=l){var u=l-20,o=l+80;u<0&&(u=0),0===u&&(o=100),o>c.length&&(o=c.length);var h=c.substr(u,o);m.forEach(function(t){var e=new RegExp(t,"gi");h=h.replace(e,'<em class="search-keyword">'+t+"</em>")}),f+='<p class="search-result">'+h+"...</p>"}f+="</li>"}}),f+="</ul>",n.innerHTML=f)})}})}("/search.xml","searchInput","searchResult")})</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-arrow-up"></i></a></div><script src="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/materialize/materialize.min.js"></script><script src="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/masonry/masonry.pkgd.min.js"></script><script src="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/aos/aos.js"></script><script src="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/scrollprogress/scrollProgress.min.js"></script><script src="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/js/matery.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/others/clicklove.js" async></script><script async src="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/others/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/gh/jeremysvn/muyun/libs/instantpage/instantpage.js" type="module"></script><script>window.imageLazyLoadSetting={isSPA:!1,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>!function(n){n.imageLazyLoadSetting.processImages=i;var e=n.imageLazyLoadSetting.isSPA,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight||document.documentElement.clientHeight)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e()},n.src=i}()}i(),n.addEventListener("scroll",function(){var t,e;t=i,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this)</script></body></html>